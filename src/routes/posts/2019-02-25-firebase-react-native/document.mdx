If one team works on both `react-native` client and backend api, we usually prefer to have both codebase in one repo. 

Because this way, one pull request and have the complete code changes for one feature.

This is especially the case with firebase as backend.

## yarn workspace

To put them in same repo, easiest way is to put them in two separate folders:

- `/client`: the react native app 
- `/firebase`: rest of the stuff

But we can do better with **yarn workspace**, [here is why.](https://yarnpkg.com/en/docs/workspaces#toc-why-would-you-want-to-do-this)

```json
{
  "private": true,
  "workspaces": {
    "packages": [ "app", "functions", "web", "scripts" ]
  }
}  
```

### react native's issue with mono workspace

- Unable to use `react-native link`
- iOS lib hardcoded path, assume `node_modules` location relative to `xcodeproject`, and for android's `settings.gradle`
- `react-native` instance finding jsBundle location.
- `react-native` jest version is newer than `create-react-app`

So, `nohoist` to the rescue. 

```json{5}
{
  "name": "app",
  "private": true,
  "workspaces": {
    "nohoist": [ "**" ]
  },
}
```

## husky, lint-staged, prettier

Now we only need to configure them once on workspace root `package.json`.

```json
{
  "devDependencies": {
    "husky": "^1.3.1",
    "lint-staged": "^8.1.4",
    "prettier": "^1.16.4"
  },
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged",
      "post-commit": "git update-index -g"
    }
  },
  "lint-staged": {
    "*.{js,json,md,ts,tsx}": [
      "prettier --write",
      "git add"
    ]
  }
}
```

## Share Configuration

`tslint.json` and `tsconfig.json`

## Share UI modal

if `web` were to be built with `react-native-web`, then we can have another workspace `common`.

We can build UI and then import it from both `app` and `web`.

> Be careful about putting none UI components in `common`, might cost a lot of effort to get firebase working with the same codebase.

## Scripts

- [meow](https://github.com/sindresorhus/meow) CLI app helper
- [chalk](https://github.com/chalk/chalk) Terminal string styling done right
- [ora](https://github.com/sindresorhus/ora) Elegant terminal spinner
- [ts-node](https://github.com/TypeStrong/ts-node) TypeScript execution and REPL for node.js

